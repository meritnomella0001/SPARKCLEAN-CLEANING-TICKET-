<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lagos Sparkle ‚Äì Book Cleaning Service</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      margin: 0;
      padding: 0;
      line-height: 1.5;
    }
    .container {
      max-width: 860px;
      margin: auto;
      padding: 20px;
    }
    .banner {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-bottom: 24px;
    }
    .banner img {
      width: 100%;
      height: auto;
      border-radius: 14px;
      object-fit: cover;
    }
    @media (min-width: 768px) {
      .banner { grid-template-columns: 1fr 1fr; }
    }
    .card {
      background: #020617;
      border-radius: 14px;
      padding: 24px;
      border: 1px solid #334155;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: #22c55e;
    }
    label {
      margin-top: 16px;
      display: block;
      font-weight: 700;
      color: #cbd5e1;
    }
    input, select, textarea, button {
      width: 100%;
      padding: 12px;
      margin-top: 6px;
      border-radius: 10px;
      border: 1px solid #334155;
      background: #0f172a;
      color: white;
      font-size: 1rem;
    }
    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #22c55e;
      box-shadow: 0 0 0 3px rgba(34,197,94,0.2);
    }
    button {
      background: #22c55e;
      color: #020617;
      font-weight: 800;
      margin-top: 20px;
      cursor: pointer;
      border: none;
    }
    button:hover {
      background: #16a34a;
    }
    #downloadBtn {
      background: #facc15;
      color: #020617;
      display: none;
    }
    .price {
      margin: 20px 0;
      font-size: 1.3rem;
      color: #22c55e;
      font-weight: 800;
      text-align: center;
      padding: 12px;
      background: rgba(34,197,94,0.1);
      border-radius: 10px;
    }
    .ticket {
      margin-top: 24px;
      border: 1px dashed #334155;
      padding: 16px;
      border-radius: 12px;
      background: #0f172a;
      display: none;
    }
    small {
      color: #94a3b8;
      display: block;
      text-align: center;
      margin-top: 12px;
    }
  </style>
  <style>
.image-carousel {
  position: relative;
  width: 100%;
  max-width: 860px;
  margin: 20px auto;
  overflow: hidden;
  border-radius: 14px;
}

.image-carousel img {
  width: 100%;
  display: block;
  transition: transform 0.5s ease;
  cursor: grab;
}

.image-carousel img:not(:first-child) {
  position: absolute;
  top: 0;
  left: 100%;
}
</style>

</head>
<body>

<div class="container">
  <div class="banner">
    <img src="https://sparkclean-cleaning-ticket.onrender.com/file_000000003d1071f4a38c74d4158b1e60.png" alt="Clean modern kitchen">
    <img src="https://sparkclean-cleaning-ticket.onrender.com/file_00000000f36471f4a15ca0ce00a45a11.png" alt="Spotless living room">
  </div>

  <h1>Book Your Cleaning Service Ticket üé´</h1>
  <div class="image-carousel">
  <img src="https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=800" alt="Image 1">
  <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800" alt="Image 2">
</div>

  <div class="card">
    <label>Full Name</label>
    <input id="name" placeholder="Type Your Name">

    <label>Phone Number</label>
    <input id="phone" placeholder="XXX-XXX-XXX-XX">

    <label>House Address</label>
    <textarea id="address" placeholder="Flat 2, Block A, Street Name"></textarea>

    <label>Service Type</label>
    <select id="service">
      <option value="Home Cleaning">Home Cleaning</option>
      <option value="Post Cleaning">Post Cleaning</option>
    </select>

    <label>House Type</label>
    <select id="house">
      <option value="Room">Room</option>
      <option value="Self Contain">Self Contain</option>
      <option value="1 Bedroom">1 Bedroom</option>
      <option value="2 Bedroom">2 Bedroom</option>
      <option value="3 Bedroom">3 Bedroom</option>
      <option value="4 Bedroom">4 Bedroom</option>
    </select>

    <label>Lagos Area</label>
    <select id="area">
      <optgroup label="Mainland">
        <option>Yaba</option>
        <option>Ikeja</option>
        <option>Surulere</option>
        <option>Iba</option>
      </optgroup>
      <optgroup label="Mid-Level">
        <option>Ikoyi</option>
        <option>Victoria Island</option>
        <option>Ajah</option>
        <option>Lekki Phase 2</option>
        <option>Chevron Drive</option>
        <option>Oniru Estate</option>
      </optgroup>
      <optgroup label="High-End">
        <option>Banana Island</option>
        <option>Magodo</option>
        <option>Lekki Phase 1</option>
        <option>Parkview Estate</option>
      </optgroup>
    </select>

    <label>Select Preferred Date</label>
    <input type="date" id="date">

    <label>Select Preferred Time</label>
    <input type="time" id="time">

    <label>Extras</label>
    <select id="extras">
      <option value="0">None</option>
      <option value="5000">Mosquito Treatment (+‚Ç¶5,000)</option>
      <option value="10000">Deep Kitchen/Toilet (+‚Ç¶10,000)</option>
    </select>

    <div class="price" id="price">Estimated Price: ‚Ç¶0</div>

    <button onclick="bookTicket()">Book Ticket</button>
    <button id="downloadBtn" onclick="downloadPDF()">Download Ticket PDF</button>

    <small>Payment is strictly after completion of work.<br>We'll open WhatsApp for instant confirmation & updates.</small>

    <div id="ticket" class="ticket"></div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
const WHATSAPP_NUMBER = '2347013550569'; // ‚Üê change if needed

// Default price table (static for immediate testing)
const prices = {
  "Home Cleaning": {
    "Room": [15000, 20000],
    "Self Contain": [20000, 25000],
    "1 Bedroom": [25000, 35000],
    "2 Bedroom": [30000, 40000],
    "3 Bedroom": [40000, 50000],
    "4 Bedroom": [45000, 70000]
  },
  "Post Cleaning": {
    "2 Bedroom": [40000, 60000],
    "3 Bedroom": [50000, 70000],
    "4 Bedroom": [60000, 100000]
  }
};

function updatePrice() {
  const svc = document.getElementById('service').value;
  const h = document.getElementById('house').value;
  const e = Number(document.getElementById('extras').value || 0);
  const priceEl = document.getElementById('price');

  if (!svc || !h) {
    priceEl.textContent = 'Estimated Price: ‚Ç¶0';
    return;
  }

  const [min, max] = prices[svc][h] || [0,0];
  priceEl.textContent = `Estimated Price: ‚Ç¶${min.toLocaleString()} ‚Äì ‚Ç¶${max.toLocaleString()} + ‚Ç¶${e.toLocaleString()}`;
}

// Update price on change
document.getElementById('service').addEventListener('change', updatePrice);
document.getElementById('house').addEventListener('change', updatePrice);
document.getElementById('extras').addEventListener('change', updatePrice);
updatePrice(); // initial price

function bookTicket() {
  const data = {
    name: document.getElementById('name').value.trim(),
    phone: document.getElementById('phone').value.trim(),
    address: document.getElementById('address').value.trim(),
    service_type: document.getElementById('service').value,
    house_type: document.getElementById('house').value,
    area: document.getElementById('area').value,
    date: document.getElementById('date').value,
    time: document.getElementById('time').value,
    extras: Number(document.getElementById('extras').value),
    estimated_price: document.getElementById('price').textContent,
    status: 'Booked'
  };

  if (!data.name || !data.phone || !data.service_type || !data.house_type || !data.date || !data.time) {
    alert('Please fill all required fields');
    return;
  }

  // Generate ticket ID
  data.id = Math.floor(Math.random() * 1000000);

  // Display ticket
  displayTicket(data);
  localStorage.setItem('lastTicket', JSON.stringify(data));

  // Open WhatsApp with pre-filled message
  const message = encodeURIComponent(
    `Hello! I just booked a cleaning service:\n\n` +
    `Ticket ID: #${data.id}\n` +
    `Service: ${data.service_type}\n` +
    `House Type: ${data.house_type}\n` +
    `Area: ${data.area}\n` +
    `Address: ${data.address}\n` +
    `Preferred Date: ${data.date}\n` +
    `Preferred Time: ${data.time}\n` +
    `Extras: ${data.extras === 0 ? 'None' : '‚Ç¶' + data.extras.toLocaleString()}\n` +
    `Estimated Price: ${data.estimated_price.replace('Estimated Price: ', '')}\n\n` +
    `Please confirm. Thank you!`
  );
  window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${message}`, '_blank');

  alert('Booking successful! WhatsApp opened for confirmation.');
}

function displayTicket(t) {
  const div = document.getElementById('ticket');
  div.innerHTML = `
    <b>Ticket ID:</b> ${t.id}<br>
    <b>Service:</b> ${t.service_type}<br>
    <b>Name:</b> ${t.name}<br>
    <b>Phone:</b> ${t.phone}<br>
    <b>Address:</b> ${t.address}<br>
    <b>House Type:</b> ${t.house_type}<br>
    <b>Area:</b> ${t.area}<br>
    <b>Preferred Date:</b> ${t.date}<br>
    <b>Preferred Time:</b> ${t.time}<br>
    <b>Extras:</b> ${t.extras === 0 ? 'None' : '‚Ç¶' + t.extras.toLocaleString()}<br>
    <b>Estimated Price:</b> ${t.estimated_price}<br>
    <b>Status:</b> ${t.status}<br>
    <small>Issued: ${new Date().toLocaleString()}</small>
  `;
  div.style.display = 'block';
  document.getElementById('downloadBtn').style.display = 'block';
}

function downloadPDF() {
  const t = JSON.parse(localStorage.getItem('lastTicket'));
  if (!t) return;

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  let y = 20;
  doc.setFontSize(16);
  doc.text('CLEANING TICKET', 105, y, { align: 'center' });
  y += 15;

  doc.setFontSize(12);
  const lines = [
    `Ticket ID: ${t.id}`,
    `Service: ${t.service_type}`,
    `Name: ${t.name}`,
    `Phone: ${t.phone}`,
    `Address: ${t.address}`,
    `House Type: ${t.house_type}`,
    `Area: ${t.area}`,
    `Date: ${t.date}`,
    `Time: ${t.time}`,
    `Extras: ${t.extras === 0 ? 'None' : '‚Ç¶' + t.extras.toLocaleString()}`,
    `Estimated Price: ${t.estimated_price}`,
    `Status: ${t.status}`,
    `Issued: ${new Date().toLocaleString()}`
  ];

  lines.forEach(line => {
    doc.text(line, 20, y);
    y += 10;
  });

  doc.save(`Ticket-${t.id}.pdf`);
}
</script>
<script>
const carousel = document.querySelector('.image-carousel');
const images = carousel.querySelectorAll('img');
let current = 0;

function showImage(index) {
  images.forEach((img, i) => {
    img.style.transform = `translateX(${(i - index) * 100}%)`;
  });
}

// Allow swipe or click arrows
let startX = 0;

carousel.addEventListener('mousedown', e => startX = e.clientX);
carousel.addEventListener('mouseup', e => {
  const diff = e.clientX - startX;
  if (diff > 50) { // swipe right
    current = (current - 1 + images.length) % images.length;
  } else if (diff < -50) { // swipe left
    current = (current + 1) % images.length;
  }
  showImage(current);
});

// initial display
showImage(current);
</script>

</body>

</html>

